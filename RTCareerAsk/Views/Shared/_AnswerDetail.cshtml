@model RTCareerAsk.Models.AnswerModel

@{
    bool IsAuthorized = ViewBag.IsAuthorized != null ? Convert.ToBoolean(ViewBag.IsAuthorized) : false;
}

<div id="@string.Format("divAns{0}", Model.ID)">
    <div class="heading">
        @Html.UpperPortrait(Model.Creator.Portrait, PortraitSize.Small, new { style = "flex-grow:0" })
        <p>
            @Html.ActionLink(Model.Creator.Name, "Index", "User", new { id = Model.Creator.UserID }, new { })
            ，在问题
            @Html.ActionLink(Model.ForQuestion.Title, "QuestionDetail", "Question", new { id = Model.ForQuestion.ID }, new { })
            下回答道：
        </p>
    </div>
    <div id="@string.Format("divAnsTxt{0}", Model.ID)" class="content">
        @Html.Raw(HttpUtility.HtmlDecode(Model.Content))
    </div>
    <div class="info-group">
        <p class="extra">
            于
        @Model.UpdateBefore
            最后编辑
        </p>
        <div class="bdsharebuttonbox">
            <a href="#" class="bds_more" data-cmd="more"></a>
            <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a>
            <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a>
            <a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a>
            <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
        </div>
        <script>
            window._bd_share_config = {
                "common": { "bdSnsKey": {}, "bdText": "", "bdMini": "2", "bdMiniList": false, "bdPic": "", "bdStyle": "1", "bdSize": "16" },
                "share": {}
            };
            with (document) 0[(getElementsByTagName('head')[0] || body).appendChild(createElement('script')).src = 'http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=' + ~(-new Date() / 36e5)];
        </script>
        <div class="action">
            <ul class="breadcrumb">
                @if (Model.IsEditAllowed)
                {
                    <li><a href="#" role="button" id="@string.Format("btnAnsEdt{0}", Model.ID)">编辑</a></li>
                }
                <li><a href="#" id="@string.Format("btnWrtCmt{0}", Model.ID)" class="@Html.AssignClassWithCondition(!IsAuthorized, "redirect-login")">评一下</a></li>
                <li class="@Html.AssignClassWithCondition(!IsAuthorized, "redirect-login") like @Html.IsActive(true, Model)" data-islike="true" data-id="@Model.ID" data-title="@Model.ForQuestion.Title" data-author="@Model.Creator.UserID" data-type="1">
                    <a href="#" id="">
                        <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span>
                        &nbsp;推荐(<span class="count">@Model.VotePositive</span>)
                    </a>
                </li>
                <li class="@Html.AssignClassWithCondition(!IsAuthorized, "redirect-login") like @Html.IsActive(false, Model)" data-islike="false" data-id="@Model.ID" data-title="@Model.ForQuestion.Title" data-author="@Model.Creator.UserID" data-type="1">
                    <a href="#" id="">
                        <span class="glyphicon glyphicon-thumbs-down" aria-hidden="true"></span>
                        &nbsp;太水(<span class="count">@Model.VoteNegative</span>)
                    </a>
                </li>
                @*<li class="active"><a href="#">收藏</a></li>
                    <li><a href="#">举报</a></li>*@
            </ul>
        </div>
    </div>
    @if (IsAuthorized)
    {
        <div id="@string.Format("divCmtForm{0}", Model.ID)" class="collapse">
            <div class="clearfix">
                @Html.Partial("_CommentForm", new RTCareerAsk.Models.CommentPostModel() { AnswerID = Model.ID, AuthorID = Model.Creator.UserID, QuestionTitle = Model.ForQuestion.Title })
            </div>
        </div>
    }
</div>
